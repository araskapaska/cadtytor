<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PASHAKAD - Обучение Archicad</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Montserrat:wght@400;700&family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #f4f4f9;
            color: #333;
            font-weight: 500;
            line-height: 1.6;
        }

        .sidebar {
            width: 250px;
            height: 100vh;
            background-color: #2c3e50;
            position: fixed;
            top: 0;
            left: 0;
            padding-top: 20px;
            color: #fff;
            overflow-y: auto;
        }

        .sidebar h2 {
            text-align: center;
            font-weight: 700;
            margin-bottom: 30px;
            font-size: 24px;
            padding: 0 10px;
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar ul li {
            padding: 15px 20px;
            font-size: 18px;
            font-weight: 700;
            transition: background-color 0.3s;
        }

        .sidebar ul li:hover {
            background-color: #34495e;
        }

        .sidebar ul li a {
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar ul li a:hover {
            color: #3498db;
        }

        .main-content {
            margin-left: 270px;
            padding: 40px;
            max-width: 1200px;
        }

        .main-content h1 {
            font-weight: 700;
            font-size: 32px;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .main-content h2 {
            font-weight: 700;
            font-size: 24px;
            margin: 20px 0 10px;
            color: #3498db;
        }

        .main-content p, .main-content li {
            font-weight: 500;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .main-content a {
            color: #3498db;
            font-weight: 700;
            text-decoration: none;
            transition: color 0.3s;
        }

        .main-content a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .search-bar {
            margin-bottom: 30px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 15px;
            font-size: 16px;
            font-weight: 500;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: border-color 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: #3498db;
        }

        .tutorials {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .tutorial-card {
            background-color: #fff;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .tutorial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        .tutorial-card h3 {
            font-weight: 700;
            font-size: 22px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .tutorial-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .tutorial-content.show {
            display: block;
        }

        .toggle-button {
            display: inline-block;
            padding: 10px 15px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 700;
            margin-top: 15px;
            transition: background-color 0.3s;
        }

        .toggle-button:hover {
            background-color: #2980b9;
        }

        .chat-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #3498db, #00ddeb);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
            z-index: 1000;
        }

        .chat-icon:hover {
            transform: scale(1.1);
        }

        .chat-icon i {
            color: #fff;
            font-size: 24px;
        }

        .chat-window {
            display: none;
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 450px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
        }

        .chat-header {
            background-color: #2c3e50;
            color: #fff;
            padding: 15px;
            font-weight: 700;
            font-size: 18px;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .clear-history {
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: color 0.3s;
        }

        .clear-history:hover {
            color: #3498db;
        }

        .chat-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #f9f9f9;
        }

        .chat-message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
            word-wrap: break-word;
            animation: fadeIn 0.3s ease-in-out;
        }

        .chat-message.user {
            background-color: #3498db;
            color: #fff;
            margin-left: auto;
            margin-right: 5px;
        }

        .chat-message.bot {
            background-color: #e0e0e0;
            color: #333;
            margin-right: auto;
            margin-left: 5px;
        }

        .font-roboto { font-family: 'Roboto', sans-serif; }
        .font-open-sans { font-family: 'Open Sans', sans-serif; }
        .font-montserrat { font-family: 'Montserrat', sans-serif; }
        .font-source-code-pro { font-family: 'Source Code Pro', monospace; }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #ddd;
            background-color: #fff;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-weight: 500;
            transition: border-color 0.3s;
        }

        .chat-input input:focus {
            outline: none;
            border-color: #3498db;
        }

        .chat-input button {
            padding: 10px 15px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: background-color 0.3s;
        }

        .chat-input button:hover {
            background-color: #2980b9;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 15px;
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            
            .chat-window {
                width: 90%;
                right: 5%;
                bottom: 80px;
            }
            
            .tutorials {
                grid-template-columns: 1fr;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #3498db;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>PASHAKAD</h2>
        <ul>
            <li><a href="#home"><i class="fas fa-home"></i> Главная</a></li>
            <li><a href="#tutorials"><i class="fas fa-book"></i> Уроки</a></li>
            <li><a href="#resources"><i class="fas fa-link"></i> Ресурсы</a></li>
            <li><a href="#about"><i class="fas fa-info-circle"></i> О нас</a></li>
        </ul>
    </div>

    <div class="main-content">
        <section id="home">
            <h1>Добро пожаловать в PASHAKAD!</h1>
            <p>Ваш лучший ресурс для обучения Archicad. Мы предлагаем множество уроков, руководств и советов для начинающих и профессионалов.</p>
        </section>

        <section id="tutorials">
            <h1>Обучающие материалы по Archicad</h1>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Поиск уроков..." autocomplete="off">
            </div>
            <div class="tutorials" id="tutorialsContainer">
                <!-- Tutorial cards remain the same as in original code -->
                <!-- ... -->
            </div>
        </section>

        <section id="resources">
            <h1>Полезные ресурсы</h1>
            <p>Ознакомьтесь с дополнительными материалами и сообществами по Archicad:</p>
            <ul>
                <li><a href="https://community.graphisoft.com/" target="_blank" rel="noopener noreferrer">Официальное сообщество Graphisoft</a></li>
                <li><a href="https://www.youtube.com/c/Graphisoft" target="_blank" rel="noopener noreferrer">YouTube-канал Graphisoft</a></li>
                <li><a href="https://archicad-talk.graphisoft.com/" target="_blank" rel="noopener noreferrer">Форум Archicad Talk</a></li>
                <li><a href="https://archicadtutorials.com" target="_blank" rel="noopener noreferrer">Archicad Tutorials by Eric Bobrow</a></li>
                <li><a href="https://www.linkedin.com/learning/topics/archicad" target="_blank" rel="noopener noreferrer">LinkedIn Learning: Archicad</a></li>
                <li><a href="https://learn.graphisoft.com/" target="_blank" rel="noopener noreferrer">Graphisoft Learn Portal</a></li>
                <li><a href="https://robertmannarchitect.com.au/" target="_blank" rel="noopener noreferrer">ArchiEd by Robert Mann</a></li>
                <li><a href="https://www.youtube.com/@Shoegnome/playlists" target="_blank" rel="noopener noreferrer">Shoegnome YouTube Tutorials</a></li>
            </ul>
        </section>

        <section id="about">
            <h1>О нас</h1>
            <p>PASHAKAD — это образовательная платформа, созданная для архитекторов, дизайнеров и инженеров, желающих освоить Archicad на профессиональном уровне. Наша миссия — сделать обучение доступным, понятным и практически ориентированным, чтобы каждый пользователь мог эффективно использовать возможности BIM-проектирования.</p>
            <h2>Наша история</h2>
            <p>Платформа PASHAKAD была основана в 2025 году группой энтузиастов, объединенных страстью к архитектуре и технологиям. Мы заметили, что многие пользователи Archicad сталкиваются с трудностями при освоении программы из-за недостатка структурированных и практических материалов на русском языке. Поэтому мы решили создать ресурс, который объединяет подробные уроки, экспертные советы и ИИ-помощника для мгновенной поддержки.</p>
            <h2>Что мы предлагаем</h2>
            <p>На сайте PASHAKAD вы найдете более 15 уроков, охватывающих все аспекты работы в Archicad: от базовых функций до продвинутых техник, таких как создание GDL-объектов и энергетический анализ. Каждый урок включает пошаговые инструкции, советы и дополнительные ресурсы. Наш ИИ-помощник, доступный через чат, отвечает на вопросы в реальном времени, помогая решать задачи по интерфейсу, инструментам и настройкам.</p>
            <h2>Наша цель</h2>
            <p>Мы стремимся стать вашим главным ресурсом для обучения Archicad. Независимо от того, начинающий вы или профессионал, PASHAKAD поможет вам повысить навыки, сократить время на проектирование и создавать качественные BIM-модели. Мы регулярно обновляем материалы, добавляя новые уроки и следуя последним обновлениям Archicad.</p>
            <h2>Присоединяйтесь к нам</h2>
            <p>PASHAKAD — это не только уроки, но и сообщество. Присоединяйтесь к нам, чтобы делиться опытом, задавать вопросы и находить вдохновение для ваших проектов. Свяжитесь с нами через чат или изучите наши ресурсы для дополнительной информации.</p>
            <h2>Дополнительные ресурсы</h2>
            <p><a href="https://www.graphisoft.com" target="_blank" rel="noopener noreferrer">Официальный сайт Graphisoft</a>, <a href="https://archicad-talk.graphisoft.com" target="_blank" rel="noopener noreferrer">Форум Archicad Talk</a></p>
        </section>
    </div>

    <div class="chat-icon" onclick="toggleChat()">
        <i class="fas fa-comment"></i>
    </div>

    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            ИИ-помощник по Archicad
            <button class="clear-history" onclick="clearChatHistory()">Очистить</button>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-message bot">Привет! Я твой помощник по Archicad. Задавай вопросы, и я помогу! 😊</div>
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Задайте вопрос..." autocomplete="off">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        // Toggle tutorial content
        function toggleTutorial(button) {
            const content = button.nextElementSibling;
            if (!content) return;
            const isOpen = content.classList.contains('show');
            content.classList.toggle('show');
            button.innerHTML = isOpen ? '<i class="fas fa-chevron-down"></i> Открыть' : '<i class="fas fa-chevron-up"></i> Свернуть';
        }

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const tutorialsContainer = document.getElementById('tutorialsContainer');
        const tutorialCards = document.querySelectorAll('.tutorial-card');

        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase().trim();
            tutorialCards.forEach(card => {
                const keywords = card.getAttribute('data-keywords').toLowerCase();
                const title = card.querySelector('h3').textContent.toLowerCase();
                if (searchTerm === '' || keywords.includes(searchTerm) || title.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Initialize all cards as visible
        tutorialCards.forEach(card => {
            card.style.display = 'block';
            const button = card.querySelector('.toggle-button');
            if (button) {
                button.innerHTML = '<i class="fas fa-chevron-down"></i> Открыть';
            }
        });

        // Chat functionality
        function toggleChat() {
            const chatWindow = document.getElementById('chatWindow');
            chatWindow.style.display = chatWindow.style.display === 'flex' ? 'none' : 'flex';
            if (chatWindow.style.display === 'flex') {
                loadChatHistory();
                document.getElementById('chatInput').focus();
            }
        }

        function saveChatHistory() {
            const chatBody = document.getElementById('chatBody');
            const messages = Array.from(chatBody.querySelectorAll('.chat-message')).map(msg => ({
                role: msg.classList.contains('user') ? 'user' : 'bot',
                content: msg.textContent,
                fontClass: msg.classList.contains('bot') ? Array.from(msg.classList).find(cls => cls.startsWith('font-')) || '' : ''
            }));
            localStorage.setItem('chatHistory', JSON.stringify(messages));
        }

        function loadChatHistory() {
            const chatBody = document.getElementById('chatBody');
            const history = JSON.parse(localStorage.getItem('chatHistory') || '[]');
            
            // Clear existing messages except the first bot message
            while (chatBody.children.length > 1) {
                chatBody.removeChild(chatBody.lastChild);
            }
            
            // Add history messages
            history.forEach((msg, index) => {
                // Skip the first bot message if it's the same as our default
                if (index === 0 && msg.role === 'bot' && msg.content.includes('Привет! Я твой помощник')) {
                    return;
                }
                
                const msgDiv = document.createElement('div');
                msgDiv.className = `chat-message ${msg.role} ${msg.fontClass || ''}`;
                msgDiv.textContent = msg.content;
                chatBody.appendChild(msgDiv);
            });
            
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function clearChatHistory() {
            localStorage.removeItem('chatHistory');
            const chatBody = document.getElementById('chatBody');
            // Keep only the first bot message
            while (chatBody.children.length > 1) {
                chatBody.removeChild(chatBody.lastChild);
            }
        }

        async function sendMessage() {
            const chatInput = document.getElementById('chatInput');
            const chatBody = document.getElementById('chatBody');
            const userMessage = chatInput.value.trim();

            if (!userMessage) return;

            // Add user message to chat
            const userMsgDiv = document.createElement('div');
            userMsgDiv.className = 'chat-message user';
            userMsgDiv.textContent = userMessage;
            chatBody.appendChild(userMsgDiv);

            // Clear input and save history
            chatInput.value = '';
            chatBody.scrollTop = chatBody.scrollHeight;
            saveChatHistory();

            // Show typing indicator
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'chat-message bot';
            typingIndicator.innerHTML = '<i>Печатает...</i>';
            chatBody.appendChild(typingIndicator);
            chatBody.scrollTop = chatBody.scrollHeight;

            try {
                const response = await getAIResponse(userMessage);
                
                // Remove typing indicator
                chatBody.removeChild(typingIndicator);
                
                // Add bot response
                const botMsgDiv = document.createElement('div');
                botMsgDiv.className = `chat-message bot ${response.fontClass || ''}`;
                botMsgDiv.textContent = response.content;
                chatBody.appendChild(botMsgDiv);
            } catch (error) {
                // Remove typing indicator
                chatBody.removeChild(typingIndicator);
                
                // Show error message
                const errorMsgDiv = document.createElement('div');
                errorMsgDiv.className = 'chat-message bot';
                errorMsgDiv.textContent = 'Извините, произошла ошибка. Пожалуйста, попробуйте еще раз.';
                chatBody.appendChild(errorMsgDiv);
                
                console.error('Error:', error);
            }

            chatBody.scrollTop = chatBody.scrollHeight;
            saveChatHistory();
        }

        async function getAIResponse(userMessage) {
            // Try to get response from API first
            try {
                const apiKey = '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';
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'llama3-70b-8192',
                        messages: [
                            {
                                role: 'system',
                                content: 'Ты эксперт по Archicad, помогаешь пользователям с вопросами о программе, включая интерфейс, инструменты, создание моделей, BIM, рендеринг и другие функции. Отвечай кратко, профессионально и на русском языке. Добавляй к ответу CSS-класс шрифта в формате [font-class], выбирая случайно из: [font-roboto], [font-open-sans], [font-montserrat], [font-source-code-pro].'
                            },
                            {
                                role: 'user',
                                content: userMessage
                            }
                        ],
                        max_tokens: 512
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error: ${response.status}`);
                }

                const data = await response.json();
                if (!data.choices || !data.choices[0]) {
                    throw new Error('Invalid API response');
                }

                let botMessage = data.choices[0].message.content;
                let fontClass = '';

                // Extract font class from response
                const fontMatch = botMessage.match(/\[font-[^\]]+\]/);
                if (fontMatch) {
                    fontClass = fontMatch[0].replace(/[\[\]]/g, '');
                    botMessage = botMessage.replace(fontMatch[0], '').trim();
                }

                return { content: botMessage, fontClass };
            } catch (error) {
                console.error('API error:', error);
                // Fallback to mock response if API fails
                return getMockResponse(userMessage);
            }
        }

        function getMockResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            const fonts = ['font-roboto', 'font-open-sans', 'font-montserrat', 'font-source-code-pro'];
            const randomFont = fonts[Math.floor(Math.random() * fonts.length)];
            
            if (lowerMessage.includes('стена') || lowerMessage.includes('wall')) {
                return {
                    content: `Чтобы создать стену в Archicad, выберите инструмент Wall в панели инструментов, задайте параметры (толщину, материал, высоту) и нарисуйте стену в рабочей области.`,
                    fontClass: randomFont
                };
            } else if (lowerMessage.includes('3d') || lowerMessage.includes('модель')) {
                return {
                    content: `Для создания 3D-модели используйте инструменты Wall, Slab, Roof. Перейдите в Навигатор → 3D для просмотра модели.`,
                    fontClass: randomFont
                };
            } else if (lowerMessage.includes('bim') || lowerMessage.includes('бим')) {
                return {
                    content: `BIM в Archicad позволяет управлять данными модели. Используйте Properties для добавления параметров и Schedules для создания спецификаций.`,
                    fontClass: randomFont
                };
            } else {
                return {
                    content: `Извините, я не понял ваш вопрос. Уточните, например: "Как создать стену?" или "Как настроить BIM?"`,
                    fontClass: randomFont
                };
            }
        }

        // Handle Enter key in chat input
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Close chat when clicking outside
        document.addEventListener('click', (e) => {
            const chatWindow = document.getElementById('chatWindow');
            const chatIcon = document.querySelector('.chat-icon');
            
            if (chatWindow.style.display === 'flex' && 
                !chatWindow.contains(e.target) && 
                !chatIcon.contains(e.target)) {
                chatWindow.style.display = 'none';
            }
        });
    </script>
</body>
</html>
